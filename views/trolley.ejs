<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="7">
    <title>Shopping list</title>
 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" crossorigin="anonymous">

</head>
<body style="background-color: #eee;">
    <section class="h-100" >
        <div class="container h-100 py-5">
          <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-10">
      
              <div class="d-flex justify-content-between align-items-center mb-4">
                <h3 class="fw-normal mb-0 text-black">Welcome to smart shop store!
                </h3>
                <h3 class="fw-normal mb-0 text-black">Shopping cart No : <%=trolleyName.slice(7) %></h3>
              </div>
              <% let totalPrice=0;%>
              <% items.forEach(function(item){ totalPrice+= (item.price*item.trolleyCnt )%>
                   
                <div class="card rounded-3 mb-4">
                  <div class="card-body p-4">
                    <div class="row d-flex justify-content-between align-items-center">
                      <div class="col-md-2 col-lg-2 col-xl-2">
                        <img
                          src="data:image/<%= item.image.contentType %>;base64,
                          <%=item.image.data.toString('base64')%>"
                          class="img-fluid rounded-3" alt="<%=item.name %>">
                      </div>
                      <div class="col-md-3 col-lg-3 col-xl-3">
                        <p class="lead fw-normal mb-2"><%=item.name %></p>
                        <p>
                          <div>
                            <span class="text-muted">Weight: </span><%= item.weight%> 
                          </div>
                          <div>
                            <span class="text-muted">Brand: </span><%= item.brand %>
                          </div>
                          
                          <div>
                            <span class="text-muted">Price/unit: </span><%= item.price %>
                          </div></p>
                      </div>
  
  
                      <div class="col-md-3 col-lg-3 col-xl-2 d-flex">
  
                          <button class="btn btn-primary px-2.3">
                          <i class="fas fa-plus" style="color:rgb(255,255,255)"></i>
                        </button>
                         
                        
                        <input id="form1" min="0"  value=<%= item.trolleyCnt %> type="number"
                          class="form-control form-control-sm" />
                          
                          <form action="/reduce" method="post">
                            <button class="btn btn-primary px-2.3"
                            onclick="this.parentNode.querySelector('input[type=number]').stepDown()">
                            <i class="fas fa-minus"></i>
                          </button>

                          <input type="hidden" name="trolleyName" value="<%= trolleyName%>"></input>
                          <input type="hidden" name="productId" value="<%= item.
                          barcodeId %>"></input>
                          

                          
                          </form>
      
                      </div>
                      <div class="col-md-3 col-lg-2 col-xl-2 offset-lg-1">
                        <h5 class="mb-0"><%=item.price*item.trolleyCnt%></h5>
                      </div>
                      
                      <div class="col-md-1 col-lg-1 col-xl-1 text-end" style="text-align: center;">
                       
                        <form action="/delete" method="post">
                          <input type="image" src="images/trash.jpg" style="height: 70px" name="submit" value=20 onclick=this.form.submit() />

                          <input type="hidden" name="trolleyName" value="<%= trolleyName%>"></input>
                          <input type="hidden" name="productId" value="<%= item.
                          barcodeId %>"></input>
                          
                        </form>
                      </div>
                    </div>
                  </div>
                </div>

              <% }) %>
      
             
      
              <div class="card">
                <div class="card-body">
                  <button type="button" class="btn btn-warning btn-block btn-lg" style="margin-left:180px">Proceed to Pay</button>
                  <span class="btn btn-block btn-success btn-lg " style="margin-left:270px">Total : <%= totalPrice%></span>
                </div>
              </div>
      
            </div>
          </div>
        </div>
      </section>
</body>
</html>